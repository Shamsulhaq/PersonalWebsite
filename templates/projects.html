{% extends "base.html" %}

{% block title %}Projects - {{ profile.name }}{% endblock %}

{% block content %}
<section class="page-header">
    <div class="container">
        <h1>My Projects</h1>
        <p>Here are some of the projects I've worked on</p>
    </div>
</section>

<section class="section">
    <div class="container">
        <div class="projects-grid">
            {% for project in projects %}
            <a href="/projects/{{ project.id }}" class="project-card" hx-boost="true" style="text-decoration: none; color: inherit; cursor: pointer;">
                {% if project.cover_image %}
                <div class="project-card-image">
                    <img src="{{ project.cover_image }}" alt="{{ project.title }}" loading="lazy">
                </div>
                {% endif %}
                <div class="project-card-content">
                    <h3>{{ project.title }}</h3>
                    <p>{{ project.short_description if project.short_description else (project.description[:150] + '...' if project.description|length > 150 else project.description) }}</p>
                    
                    <div class="project-tech">
                        {% for tech in project.technologies.split(',') %}
                        <span class="tech-tag">{{ tech }}</span>
                        {% endfor %}
                    </div>
                    
                    {% if project.github_url or project.demo_url %}
                    <div class="project-links">
                        {% if project.github_url %}
                        <span class="btn btn-sm btn-secondary" onclick="event.preventDefault(); event.stopPropagation(); window.open('{{ project.github_url }}', '_blank');">GitHub</span>
                        {% endif %}
                        {% if project.demo_url %}
                        <span class="btn btn-sm btn-primary" onclick="event.preventDefault(); event.stopPropagation(); window.open('{{ project.demo_url }}', '_blank');">Live Demo</span>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
            </a>
            {% endfor %}
        </div>
        
        <!-- Pagination -->
        {% if total_pages > 1 %}
        <div class="pagination">
            {% if page > 1 %}
            <a href="/projects?page={{ page - 1 }}" class="btn btn-secondary">← Previous</a>
            {% endif %}
            
            {% for p in range(1, total_pages + 1) %}
                {% if p == page %}
                <span class="btn btn-primary">{{ p }}</span>
                {% elif p == 1 or p == total_pages or (p >= page - 2 and p <= page + 2) %}
                <a href="/projects?page={{ p }}" class="btn btn-secondary">{{ p }}</a>
                {% elif p == page - 3 or p == page + 3 %}
                <span class="pagination-ellipsis">...</span>
                {% endif %}
            {% endfor %}
            
            {% if page < total_pages %}
            <a href="/projects?page={{ page + 1 }}" class="btn btn-secondary">Next →</a>
            {% endif %}
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}
