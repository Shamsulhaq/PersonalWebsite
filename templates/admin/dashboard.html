{% extends "admin/base.html" %}

{% block title %}Dashboard - Admin{% endblock %}
{% block page_title %}ğŸ“Š Dashboard{% endblock %}

{% block content %}
<div class="admin-container">
    <h1>Dashboard</h1>
    <p>Welcome back, {{ admin.username }}!</p>
    
    <div class="dashboard-stats">
        <div class="stat-card">
            <div class="stat-icon">ğŸ“</div>
            <div class="stat-content">
                <h3>{{ projects_count }}</h3>
                <p>Projects</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">ğŸ“</div>
            <div class="stat-content">
                <h3>{{ published_posts_count }}</h3>
                <p>Published Posts</p>
                <small style="color: #f59e0b;">{{ draft_posts_count }} drafts</small>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">ğŸ‘ï¸</div>
            <div class="stat-content">
                <h3>{{ total_views }}</h3>
                <p>Total Views</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">ğŸ› ï¸</div>
            <div class="stat-content">
                <h3>{{ skills_count }}</h3>
                <p>Skills</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">ğŸ“§</div>
            <div class="stat-content">
                <h3>{{ unread_messages_count }}</h3>
                <p>Unread Messages</p>
            </div>
        </div>
    </div>
    
    <!-- Analytics Section -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem; margin-top: 3rem;">
        <!-- Most Viewed Posts -->
        <div class="analytics-card" style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px;">
            <h3 style="margin-bottom: 1rem;">ğŸ“Š Most Viewed Posts</h3>
            {% if most_viewed %}
            <ul style="list-style: none; padding: 0;">
                {% for post in most_viewed %}
                <li style="padding: 0.75rem 0; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
                    <a href="/admin/blog/{{ post.id }}/edit" style="color: var(--text-primary); text-decoration: none; flex: 1;">
                        {{ post.title }}
                    </a>
                    <span style="color: var(--text-secondary); font-size: 0.875rem;">{{ post.view_count or 0 }} views</span>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p style="color: var(--text-secondary);">No posts yet</p>
            {% endif %}
        </div>
        
        <!-- Recent Contact Messages -->
        <div class="analytics-card" style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px;">
            <h3 style="margin-bottom: 1rem;">ğŸ“¬ Recent Messages</h3>
            {% if recent_messages %}
            <ul style="list-style: none; padding: 0;">
                {% for msg in recent_messages %}
                <li style="padding: 0.75rem 0; border-bottom: 1px solid var(--border-color);">
                    <a href="/admin/contact/{{ msg.id }}" style="color: var(--text-primary); text-decoration: none; display: block;">
                        <strong>{{ msg.name }}</strong> - {{ msg.subject }}
                        <br><small style="color: var(--text-secondary);">{{ msg.created_at.strftime('%Y-%m-%d %H:%M') }}</small>
                    </a>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p style="color: var(--text-secondary);">No messages yet</p>
            {% endif %}
        </div>
    </div>
    
    <div class="quick-actions">
        <h2>Quick Actions</h2>
        <div class="actions-grid">
            <a href="/admin/profile" class="action-card">
                <span class="action-icon">ğŸ‘¤</span>
                <span>Edit Profile</span>
            </a>
            <a href="/admin/projects/new" class="action-card">
                <span class="action-icon">â•</span>
                <span>New Project</span>
            </a>
            <a href="/admin/blog/new" class="action-card">
                <span class="action-icon">âœï¸</span>
                <span>New Blog Post</span>
            </a>
            <a href="/admin/skills" class="action-card">
                <span class="action-icon">âš™ï¸</span>
                <span>Manage Skills</span>
            </a>
            <a href="/admin/contact" class="action-card">
                <span class="action-icon">ğŸ“§</span>
                <span>Contact Messages</span>
            </a>
            <a href="/admin/theme" class="action-card">
                <span class="action-icon">ğŸ¨</span>
                <span>Customize Theme</span>
            </a>
            <a href="/admin/change-password" class="action-card">
                <span class="action-icon">ğŸ”’</span>
                <span>Change Password</span>
            </a>
        </div>
    </div>
</div>
{% endblock %}
